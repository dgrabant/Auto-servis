/* --- 1. POZADINA I ATMOSFERA --- */
    #loading-screen {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        /* Gradijent za atmosferu (tamno nebo -> horizont) */
        background: radial-gradient(circle at center bottom, #d80303d2 0%, #030303 60%, #00D4FF 130%);
        display: none;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        z-index: 9999;
        font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
        overflow: hidden;
    }

    #loading-screen[hidden] { display: none; }

    /* --- 2. CESTA I OKOLINA --- */
    .scene-container {
        position: relative;
        width: 100%;
        height: 180px;
        overflow: hidden;
        /* Perspektiva za bolji 3D osjećaj */
        perspective: 600px;
        display: flex;
        justify-content: center;
        border-bottom: 3px solid #331111; /* Tamno crvena linija horizonta */
    }

    .road {
        position: absolute;
        bottom: 0;
        width: 150%;
        height: 80px;
        background: linear-gradient(to bottom, #333, #111);
        transform-origin: bottom;
        transform: rotateX(60deg); /* Iskrivljenje za perspektivu */
        z-index: 1;
    }

    /* Linije na cesti */
    .road::after {
        content: '';
        position: absolute;
        top: 50%;
        left: 0;
        width: 200%;
        height: 4px;
        background: repeating-linear-gradient(
            to right,
            rgba(255, 255, 255, 0.8) 0,
            rgba(255, 255, 255, 0.8) 40px,
            transparent 40px,
            transparent 100px
        );
        transform: translateY(-50%);
        animation: moveRoad 0.8s linear infinite;
    }

    /* --- 3. AUTO (Poboljšani dizajn) --- */
    .car-wrapper {
        position: absolute;
        bottom: 30px;
        z-index: 10;
        /* Auto lagano poskakuje i naginje se */
        animation: bounceAndTilt 0.6s infinite ease-in-out alternate;
    }

    .car {
        position: relative;
        width: 120px;
        height: 45px;
    }

    /* Sjena ispod auta */
    .car-shadow {
        position: absolute;
        bottom: -15px;
        left: 5%;
        width: 90%;
        height: 15px;
        background: rgba(0,0,0,0.6);
        border-radius: 50%;
        filter: blur(8px);
        z-index: -1;
    }

    /* Karoserija s gradijentom */
    .car-body {
        position: absolute;
        bottom: 0;
        width: 100%;
        height: 30px;
        /* Metalik crveni gradijent */
        background: linear-gradient(to bottom, #ff4d4d, #cc0000);
        border-radius: 8px 20px 5px 5px;
        border-bottom: 2px solid #990000;
        box-shadow: inset 0 5px 10px rgba(255,255,255,0.2);
    }

    /* Kabina */
    .car-top {
        position: absolute;
        top: -15px;
        left: 20px;
        width: 65px;
        height: 25px;
        background: linear-gradient(to bottom, #ff4d4d, #cc0000);
        border-radius: 12px 15px 0 0;
        transform: skewX(-10deg); /* Aerodinamični nagib */
    }

    /* Prozori */
    .car-window {
        position: absolute;
        top: -12px;
        left: 45px;
        width: 30px;
        height: 18px;
        background: linear-gradient(to bottom right, #333, #111);
        border-radius: 0 8px 0 0;
        border: 1px solid #555;
        transform: skewX(-10deg);
    }
    
    /* Svjetla */
    .light-front {
        position: absolute;
        bottom: 5px;
        right: -2px;
        width: 8px;
        height: 12px;
        background: #fff7cc; /* Žućkasto svjetlo */
        border-radius: 0 4px 4px 0;
        box-shadow: 0 0 10px 2px #fff7cc;
    }

    .light-back {
        position: absolute;
        bottom: 8px;
        left: -2px;
        width: 6px;
        height: 10px;
        background: #ff0000;
        border-radius: 4px 0 0 4px;
        box-shadow: 0 0 8px 1px #ff0000;
    }

    /* Kotači */
    .wheel {
        position: absolute;
        bottom: -10px;
        padding: 0px 2px;
        width: 24px;
        height: 24px;
        background: radial-gradient(circle at center, #777 20%, #222 21%, #111 100%);
        border: 2px solid #444;
        border-radius: 50%;
        animation: spin 0.3s linear infinite;
    }
    .wheel.front { right: 15px; }
    .wheel.bac { left: 15px; }

    /* --- 4. EFEKTI BRZINE --- */
    .speed-trails {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: 5;
    }

    .trail {
        position: absolute;
        background: rgba(255,255,255,0.1);
        height: 2px;
        border-radius: 2px;
        animation: trailMove linear infinite;
    }
    /* Različite linije brzine */
    .trail:nth-child(1) { top: 60px; left: 100%; width: 100px; animation-duration: 1.2s; animation-delay: 0s; }
    .trail:nth-child(2) { top: 80px; left: 110%; width: 60px;  animation-duration: 0.8s; animation-delay: 0.3s; }
    .trail:nth-child(3) { top: 100px; left: 120%; width: 150px; animation-duration: 1.5s; animation-delay: 0.1s; }

    /* --- 5. TEKST --- */
    .loading-text {
        margin-top: -20px; /* Približi cesti */
        color: #fff;
        font-size: 1.4rem;
        font-weight: 800;
        text-transform: uppercase;
        letter-spacing: 2px;
        /* Blagi nagib teksta za dinamiku */
        transform: skewX(-10deg);
        text-shadow: 0 2px 4px rgba(0,0,0,0.5);
        z-index: 20;
    }
    
    .dots { animation: blinkDots 1.5s infinite; }

    /* --- ANIMACIJE --- */
    @keyframes moveRoad {
        0% { transform: translateY(-50%) translateX(0); }
        100% { transform: translateY(-50%) translateX(-200px); }
    }

    @keyframes spin {
        100% { transform: rotate(360deg); }
    }

    /* Složenije poskakivanje */
    @keyframes bounceAndTilt {
        0% { transform: translateY(0) rotate(0deg); }
        50% { transform: translateY(-3px) rotate(-0.5deg); }
        100% { transform: translateY(0) rotate(0deg); }
    }

    @keyframes trailMove {
        0% { transform: translateX(0); opacity: 0; }
        20% { opacity: 1; }
        100% { transform: translateX(-600px); opacity: 0; }
    }

    @keyframes blinkDots {
        0%, 20% { opacity: 0; }
        40% { opacity: 1; }
        100% { opacity: 1; }
    }